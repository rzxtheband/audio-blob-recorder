<!DOCTYPE html>
<html lang="en">
<head>
  <title>Audio Recorder</title>
  <script>
    let mediaRecorder;
    let audioBlob;

    function startRecording() {
      navigator.mediaDevices.getUserMedia({ audio: true })
        .then(function (stream) {
          mediaRecorder = new MediaRecorder(stream);
          mediaRecorder.ondataavailable = function (e) {
            audioBlob = e.data;
          };
          mediaRecorder.start();
        });
    }

    function stopRecording() {
      if (mediaRecorder) {
        mediaRecorder.stop();
      }
    }

    async function uploadAudio() {
      const formData = new FormData();
      formData.append('audio', audioBlob, 'recording.wav');
      await fetch('/api/upload-audio', {
        method: 'POST',
        body: formData,
      });
    }

    async function playAudio() {
      const response = await fetch('/api/get-audio');
      const audio = new Audio(URL.createObjectURL(await response.blob()));
      audio.play();
    }
  </script>
</head>
<body>
  <button onclick="startRecording()">Start Recording</button>
  <button onclick="stopRecording()">Stop Recording</button>
  <button onclick="uploadAudio()">Upload Audio</button>
  <button onclick="playAudio()">Play Audio</button>
</body>
</html>
